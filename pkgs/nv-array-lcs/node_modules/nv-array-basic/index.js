const{hole,noexist,is_int,GLOBAL_ERROR_DICT}=require("nv-facutil-basic"),lsti=e=>e.length-1;function validate_index(e,t){if(0<=t&&t<e.length)return t}function validate_value(e,t){if(0<=e.indexOf(t))return t}function validate_vi(e,t){var n=t.i,i=t.v;if(void 0!==validate_index(e,n)&&e[n]===i)return t}function some(e,...n){return e.filter((e,t)=>n.includes(t))}function some_not(e,...n){return e.filter((e,t)=>!n.includes(t))}function interval(e,n){return e.filter((e,t)=>t%n==0)}function bin(t,e,n=!0){t=t.toString(2);let i=Array.from(t).map(e=>parseInt(e));t=(e=void 0===e?i.length:e)-i.length;if(0<t){let e=Array.from({length:t}).map(e=>0);return n?e.concat(i):i.concat(e)}return n?i.slice(0,e):i.slice(-t)}function eq(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function combine(...t){let e=Array.from({length:t[0].length});return e=e.map((e,n)=>{let i={};return t.forEach((e,t)=>{i[t]=e[n]}),i}),e}function uniform_index(e,t){return t<0?t%e.length+e.length:t>=e.length?e.length-1:t}function mid_index_pair(e){e=e.length;return 0===e?[]:e%2?[(e-1)/2]:[e/2-1,e/2]}function mid_index_left(e){return mid_index_pair(e)[0]}function mid_index_right(e){e=mid_index_pair(e);return e.length<2?e[0]:e[1]}function mid_value_pair(t){let e=mid_index_pair(t),n=[];return e.forEach(e=>{n.push(t[e])}),n}function mid_value_left(e){return e[mid_index_left(e)]}function mid_value_right(e){return e[mid_index_right(e)]}function to_map(e){return new Map(Object.entries(e))}function to_wmap(t){let n=new WeakMap;for(let e=0;e<t.length;e++)n.set(t[e],e);return n}function is_hole_element_at(e,n){let i=hole;return e.forEach((e,t)=>{t===n&&(i=t)}),i==hole}function get_nonhole_indexes(e){return e.map((e,t)=>t).filter(e=>void 0!==e)}function get_hole_indexes(t){let n=get_ary_nonhole_indexes(t),i=[];for(let e=0;e<t.length;e++)n.includes(e)||i.push(e);return i}function has_hole(e){return get_ary_nonhole_indexes(e).length!==e.length}function fill_hole(t,n=void 0){let i=get_ary_nonhole_indexes(t);for(let e=0;e<t.length;e++)i.includes(e)||(t[e]=n);return t}function freq(e,t){let n=0;for(var i of e)i===t&&(n+=1);return n}function _is_index(e,t){return e.toString()===t&&0<=e&&e<2**32-1}function is_index(e){return _is_index(parseInt(e),e)}function _get_with_index(e,t,n){var[i,_]=[0,e.length];return i<=n&&n<_?is_hole_element_at(e,n)?hole:Reflect.get(e,t):noexist}function _safe_get(e,t){var n=parseInt(t);return _is_index(n,t)?_get_with_index(e,t,n):Reflect.get(e,t)}function safe_get(e,t){return"string"==typeof t?_safe_get(e,t):is_int(t)?_get_with_index(e,t,t):Reflect.get(e,t)}function creat_safe_getter_proxy(e){return new Proxy(e,{get:function(e,t,n){return _safe_get(e,t)}})}const ERROR_DICT={index_not_in_range:new Error("index_not_in_range")};function _set_with_index(e,t,n,i){var[_,r]=[0,e.length];if(_<=n&&n<r){if(i===noexist)throw GLOBAL_ERROR_DICT.noexist_is_not_assignable;return Reflect.set(e,t,i)}throw ERROR_DICT.index_not_in_range}function _safe_set(e,t,n){var i=parseInt(t);_is_index(i,t)?_set_with_index(e,t,i,n):Reflect.set(e,t,n)}function safe_set(e,t,n){"string"==typeof t?_safe_set(e,t,n):is_int(t)?_set_with_index(e,t,t,n):Reflect.set(e,t,n)}function creat_safe_setter_proxy(e){return new Proxy(e,{set:function(e,t,n,i){_safe_set(e,t,n)}})}function creat_safe_gsetter_proxy(e){return new Proxy(e,{get:function(e,t,n){return _safe_get(e,t)},set:function(e,t,n,i){_safe_set(e,t,n)}})}const foldl=(e,t,n)=>{for(var i of n)t=e(t,i);return t},foldr=(t,n,i)=>{for(let e=n.length-1-1;-1<e;e--)i=t(n[e],i);return i};function islct(e,n){return e.filter((e,t)=>n.includes(t))}module.exports={eq:eq,bin:bin,clear:e=>e.splice(0,1/0),head:e=>e[0],tail:e=>e.slice(1),mid:e=>e.slice(1,lsti(e)),init:e=>e.slice(0,lsti(e)),lsti:lsti,lst:e=>e[lsti(e)],slst:(e,t)=>{e[e[__l]-1]=t},uniform_index:uniform_index,validate_index:validate_index,validate_value:validate_value,validate_vi:validate_vi,some:some,some_not:some_not,interval:interval,odd:e=>e.filter((e,t)=>t%2),even:e=>e.filter((e,t)=>!(t%2)),freq:freq,combine:combine,mid_index_pair:mid_index_pair,mid_index_left:mid_index_left,mid_index_right:mid_index_right,mid_value_pair:mid_value_pair,mid_value_left:mid_value_left,mid_value_right:mid_value_right,ibfr:(e,t,n)=>(e.splice(t,0,n),e),iaft:(e,t,n)=>(e.splice(t+1,0,n),e),rm:(e,t)=>{var n=e[t];return e.splice(t,1),n},rplc:(e,t,n)=>e[t]=n,cp:e=>e.slice(0),to_map:to_map,to_wmap:to_wmap,is_hole_element_at:is_hole_element_at,get_nonhole_indexes:get_nonhole_indexes,get_hole_indexes:get_hole_indexes,has_hole:has_hole,fill_hole:fill_hole,is_index:is_index,ERROR_DICT:ERROR_DICT,safe_get:safe_get,creat_safe_getter_proxy:creat_safe_getter_proxy,safe_set:safe_set,creat_safe_setter_proxy:creat_safe_setter_proxy,creat_safe_gsetter_proxy:creat_safe_gsetter_proxy,hole:hole,noexist:noexist,foldl:foldl,foldr:foldr,islct:islct};